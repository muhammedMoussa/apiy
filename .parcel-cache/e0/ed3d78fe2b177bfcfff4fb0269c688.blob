"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Get = void 0;

/* get function */
const Get = options => {
  return new Promise(async (resolve, reject) => {
    const xhr = new XMLHttpRequest();
    xhr.responseType = 'json';
    await xhr.open(options.method, options.url);
    await xhr.send(); // try {
    //     xhr.send();
    // } catch (error) {
    //     reject(new Error("Whoops!"));
    // }

    xhr.onload = function () {
      if (xhr.status != 200) {
        reject(new Error("Whoops!"));
      } else {
        resolve(xhr.response);
      }
    };

    xhr.onprogress = function (event) {
      if (event.lengthComputable) {
        alert(`Received ${event.loaded} of ${event.total} bytes`);
      } else {
        alert(`Received ${event.loaded} bytes`); // no Content-Length
      }
    };

    xhr.onerror = function () {
      reject(new Error("â›” Whoops!"));
    };
  });
};

exports.Get = Get;